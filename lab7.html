<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aleira N. Sanchez - Labs</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav>
        <a href="index.html" class="logo">Aleira N. Sanchez</a>
        <ul>
            <!-- Other sections -->
            <li class="dropdown">
                <span class="bold-text">Labs</span>
                <div class="dropdown-content">
                    <a href="lab1.html">Lab 1: Artemis and Bluetooth</a>
                    <a href="lab2.html">Lab 2: IMU</a>
                    <a href="lab3.html">Lab 3: ToF</a>
                    <a href="lab4.html">Lab 4: Motor Drivers and Open Loop Control</a>
                    <a href="lab5.html">Lab 5: Linear PID and Linear Interpolation</a>
                    <a href="lab6.html">Lab 6: Orientation PID</a>
                    <a href="lab7.html">Lab 7: Kalman Filtering</a>
                    <!-- Add more labs as needed -->
                </div>
            </li>
        </ul>
    </nav>

    <button class="home-button" onclick="goHome()">Return to Home</button>

    <script>
        function goHome() {
            window.location.href = "index.html"; // Adjust if your homepage is in a different folder
        }
    </script>

    
    <!-- Labs Details Section -->
    <section id="labs-subpage">
        <div class="gallery">
            <section id="lab7">
                <div class="lab-text">
                    <h1>Lab 7: Kalman Filtering</h1>
                  
<!--                    <p><a href="motorsControlPt1.png" target="_blank">MotorsControl.h Part 1</a></p> -- -->
<!--                     <pre><code>
                    </code></pre>
                    <img src="orientationControl.png" alt="Orientation Command" class="lab-image"> -->
                    
<!--                     <h2>TASKS</h2> -->
                    <h2>ESTIMATING DRAG & MOMENTUM:</h2>
                    <p>To estimate my drag and momentum, I started with a step input, u(t), of 150 PWM, which is 58.8% of the maximum PWM. I selected this value because my calibration factor is 1.8, which results in one set of wheels operating at 250 PWM and the other at 150 PWM. Since 250 PWM is the maximum, I used 150 PWM as the input. I ran my code multiple times with this input. Initially, I set the data collection time to one second but found that I couldn't gather enough data points to determine the steady-state speed. Therefore, I increased the collection time to two seconds, which allowed me to obtain sufficient data for analysis. This is the data I got:</p>
                    <table>
                        <tr>
                            <td><img src="distPlot_drag&k.png" alt="Distance vs time" width="300"></td>
                            <td><img src="speedPlot_drag&k.png" alt="Speed vs time" width="300"></td>
                        </tr>
                    </table>
                    <p>From this trial of 150 PWM input, my 90% of speed is 2.36489 m/s which happens at approximately 1.204 seconds. I then used the equations from lecture to estimate the values for drag and momentum:</p>
                    <img src="calc4drag&k.png" alt="Orientation Command" class="lab-image">
                    <p>For this I created a new case command that you can find here:</p>
                    <p><a href="steadySpeedCase.png" target="_blank">STEADY_SPEED Command</a></p>

                    <h2>INITIALIZING KALMAN FILTER (PYTHON):</h2>
                    <p>Given the values found before, the matrices A and B are </p>
                    <math>
                      <mrow>
                        <mi>A</mi>
                        <mo>=</mo>
                        <mo>[</mo>
                        <mtable>
                          <mtr>
                            <mtd><mn>0</mn></mtd> <mtd><mn>1</mn></mtd>
                          </mtr>
                          <mtr>
                            <mtd><mn>0</mn></mtd> <mtd><mfrac>
                              <mo>-d</mo>
                              <mo>m</mo>
                            </mfrac></mtd>
                          </mtr>
                        </mtable>
                        <mo>]</mo>
                        <mo>=</mo>
                        <mo>[</mo>
                        <mtable>
                          <mtr>
                            <mtd><mn>0</mn></mtd> <mtd><mn>1</mn></mtd>
                          </mtr>
                          <mtr>
                            <mtd><mn>0</mn></mtd> <mtd><mn>1.91265</mn></mtd>
                          </mtr>
                        </mtable>
                        <mo>]</mo>
                      </mrow>
                    </math>
                    
                    <mspace width="2em"/>
                        
                    <math>
                      <mrow>
                        <mi>B</mi>
                        <mo>=</mo>
                        <mo>[</mo>
                        <mtable>
                          <mtr>
                            <mtd><mn>0</mn></mtd>
                          </mtr>
                          <mtr>
                            <mtd><mfrac>
                              <mn>1</mn>
                              <mn>m</mn>
                            </mfrac></mtd>
                          </mtr>
                        </mtable>
                        <mo>]</mo>
                        <mo>=</mo>
                        <mo>[</mo>
                        <mtable>
                          <mtr>
                            <mtd><mn>0</mn></mtd>
                          </mtr>
                          <mtr>
                            <mtd><mn>4.5232</mn></mtd>
                          </mtr>
                        </mtable>
                        <mo>]</mo>
                      </mrow>
                    </math>
                    <p>...</p>


                  
                    <h3>IMPLEMENTING KALMAN FILTER IN JUPYTER:</h3>
                    <p>...</p>
                  
                    <h3>IMPLEMENTING KALMAN FILTER ON THE ROBOT:</h3>
                    <p>...</p>
                  
                    <h3>REFERENCES:</h3>
                    <p>For this lab I referenced, Stephan Wagner's and Mikayla Lahr's labs from previous years. I also used ChatGPT to help with the grammar.</p>
            </section>
        </div>
    </section>
</body>
</html>
