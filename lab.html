<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aleira N. Sanchez - Labs</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav>
        <a href="index.html" class="logo">Aleira N. Sanchez</a>
        <ul>
            <li><a href="index.html">Go back</a></li> <!-- Link back to the main page -->
        </ul>
    </nav>

    
    <!-- Labs Details Section -->
    <section id="labs-subpage">
        <div class="gallery">
            <section id="lab1a">
                <div class="lab-text">
                    <h1>Lab 1A: Artemis</h1>
                    <h3>Objective: <span class="objective-text">To familiarize myself with the Arduino IDE and the Artemis board. Get comfortable programming the board, managing basic outputs, communicating via serial connection, and utilizing the onboard sensors.</span></h3>
                    <h3>Pre-Lab: <span class="objective-text">Installed the latest versions of Arduino IDE and Sparkfun Apollo3 boards manager.</span></h3>
                    <h3>Task 1: Blink</h3>
                    <div class="video-container">
                        <iframe width="560" height="315" src="https://www.youtube.com/embed/ht9bpHsNnP4?si=W0C8Ul9ZaN7YtuvT" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                    </div>
                    <p>Uploaded the Blink.ino code to the RedBoard Artemis Nano.</p>
                    <br> <!-- Line break -->

                    
                    <h3>Task 2: Serial</h3>
                    <div class="video-container">
                        <iframe width="560" height="315" src="https://www.youtube.com/embed/IysLmSLOE5M?si=1iehgUwczvUTOcoN" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                    </div>
                    <p>Uploaded the Example04_Serial.ino code to the RedBoard Artemis Nano.</p>
                    <br>

                    <h3>Task 3: Temperature</h3>
                    <div class="video-container">
                        <iframe width="560" height="315" src="https://www.youtube.com/embed/L2gW-0fc3KY?si=kfwtEcmecsuXr9p7" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                    </div>
                    <p>Uploaded the Example02_AnalogRead.ino code to the RedBoard Artemis Nano. As I read the Serial Monitor, I realized that the temperature was not in units that I could easily understand, so I commented out the two Serial.print commands the original code had. I added my own Serial.print for the variable temp_f which contains the calculated temperature value in Farenheit.</p>
                    <br>
                    
                    <h3>Task 4: Microphone</h3>
                    <div class="video-container">
                        <iframe width="560" height="315" src="https://www.youtube.com/embed/_eJQqSUI0n8?si=qZg4RaN_W5M99w2E" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                    </div>
                    <p>Uploaded the Example1_MicrophoneOutput.ino to the RedBoard Artemis Nano and experimented with different pitches to observe the loudest frequency displayed.  </p>
                    <br>

                    <h3>Task 5: Blink with C-note</h3>
                    <div class="video-container">
                        <iframe width="560" height="315" src="https://www.youtube.com/embed/W2kiBlS4Hjk?si=SheHTA2CsTtCsFDl" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                    </div>
                    <p>I combined the Blink.ino and Example1_MicrophoneOutput.ino sketches into one and uploaded it to the board. Then, I searched online for a site that could play a C-note and found one that played both C3 and C4. I played these notes and observed their threshold frequencies. I decided to program the board for the C3 note and added an if-statement in the loop function of the new sketch to turn on the LED if the loudest frequency was within that threshold.   </p>
                    <br>
                    
                    <a href="index.html#lab1a">Back to Lab 1A on main page</a> <!-- Link back to the section on the main page -->
                </div>
            </section>    

<!-- --------LAB 1B-------- -->
            <section id="lab1b">
                <div class="lab-text">
                    <h1>Lab 1B: Bluetooth</h1>
                    <h3>Objective: <span class="objective-text">To establish communication between my computer and the Artemis board via Bluetooth, which I will later use to send data from the Artemis board to the computer. To also be able to send Python commands from a Jupyter Notebook to the Artemis board while running Arduino.</span></h3>
                    <h3>Pre-Lab: <span class="objective-text"> Since I had the latest version of the Arduino, I proceeded with creating a new virtial environment named “FastRobots_ble”. I then activated the virtual environment so I could start working on Jupyter Lab. </span></h3>
                    <h3>Configurations: <span class="objective-text"> First thing I did was upload the ble_arduino.ino code to the Artemis board and get its MAC Address. With this I updated the artemis_address in connections.yaml. I proceeded with generating a new UUID so that it is unique to my board and I replaced the BLEService UUID in the ble_arduino.ino with this new UUID. I connected the Artemis board with the computer via Bluetooth by uploading this code in Jupyter Lab:</span></h3>
                    <img src="bLE.png" alt="Bluetooth code" class="lab-image">
                    <br>
                    
                    <h3>Task 1: Echo</h3>
                    <p>For this task I analyzed the commands PING and SEND_TWO_INTS in the ble_arduino.ino code. With multiple hours of running and debugging I was able to understand what each of their commands do and make something similar for the ECHO command. This is my ECHO command: </p>
                    <img src="ECHO.png" alt="ECHO command" class="lab-image">
                    <p>And this is the Python side of it and how the computer replied to the ECHO command:</p>
                    <img src="task1_python.png" alt="Python Echo response" class="lab-image">
                    <br>

                    <h3>Task 2: SEND_THREE_FLOATS</h3>
                    <p>I started by looking at the command SENT_TWO_INTS once again. I figured that if they are doing this with integers I could modify it so it takes in floats instead of integers, and that is what I did. I copy pasted the code, changed the class to a float and added an extra one so it is three floats being extracted. This is how the command looks in Arduino: </p>
                    <img src="send three floats.png" alt="Send Three Floats Command" class="lab-image">
                    <p>This is the command that was sent via Python:</p>
                    <img src="floats python.png" alt="Send Three Floats Python" class="lab-image">
                    <p>This is what the Serial Monitor in Arduino printed out:</p>
                    <img src="floats serial monitor.png" alt="Send Three Floats Arduino" class="lab-image">
                    <br>

                    <h3>Task 3: GET_TIME_MILLIS</h3>
                    <p>At first, I searched if there is a function in Arduino that would give you the time in milliseconds. Once I saw there is, I copied the code from the ECHO command and modified it so it would print the value of millis(). I ran into an error uploading the code to the board because I forgot to write a class for the millis function, but I then added double and I was able to upload it. This is my GET_TIME_MILLIS command:  </p>
                    <img src="millis arduino.png" alt="Get time millis Command" class="lab-image">
                    <p>Then, when I was trying to call the command on Python it kept showing an error that said “ AttributeError: GET_TIME_MILLIS”. I had not seen this error before and I could not understand it so I asked AI what the error meant and it said that “the command doesn’t exist in the CMD enum”. I remembered seeing in the folder ble_python a code called “cmd_types.py” that looked similar to what AI showed me. I went to that code and added the GET_TIME_MILLIS to it, following ECHO which is how I wrote it in the ble_arduino.ino code, and this is what the Python side looked like after I got it to work: </p>
                    <img src="millis_python.png" alt="Get time millis Python" class="lab-image">
                    <br>

                    <h3>Task 4: Notification Handler</h3>
                    <p> For this task, I created a notification handler that would receive the string from the board and extract the number. In the function I decided to look for "T:" in the string and extract whatever is after that. I was able to do this with the split function I found in the Python cheatsheet that's in the course website. </p>
                    <img src="notif handler.png" alt="Notification handler" class="lab-image">
                    <br>

                    <h3>Task 5: Time Data Sending Loop </h3>
                    <p>I first pasted the code from GET_TIME_MILLIS and then I added the condition so it only collects data for 5 seconds. I initialized both variables at the top of the code (as unsigned long) and then added this new function to the cmd_types.py code. This is TIME_SEND_LOOP in Arduino: </p>
                    <img src="time_send_loop.png" alt="Time Send Loop" class="lab-image">
                    <p>I ran into a few issues with the Python side and then i wanted to add some kind of index value to each line so I ended up altering my notification_handler function. This is the latest version:</p>
                    <img src="notification_handler.png" alt="Updated Notification Handler" class="lab-image"> 
                    <p>And this is what I called in Python and the output. There were 273 timestamps sent from the Arduino in 5 seconds which is about 54.6 messages per second. </p>
                    <img src="python_output.png" alt="Python Output" class="lab-image">
                    <br>

                    <h3>Task 6: Sending Time Data with Arrays </h3>
                    <p>Before diving into the commands, here are the variables I had to initialize globally.</p>
                    <img src="initialized variables.png" alt="Initialized variables" class="lab-image">
                    <p>Here are the updated TIME_SEND_LOOP and the SEND_TIME_DATA. I added a break to the TIME_SEND_LOOP because when I ran it initially it was on a forever printing loop.</p>
                    <img src="new commands.png" alt="New commands" class="lab-image">
                    <p>And this is the Python side:</p>
                    <img src="python interface.png" alt="Python" class="lab-image">
                    <br>

                    <h3>Task 7: Sending Time and Temperature with Arrays </h3>
                    <p>I combined my two commands from before (TIME_SEND_LOOP and SEND_TIME_DATA) and then added the getTempDegF function we used in Lab 1A. When printing I ran into isuees with the time going back after increasing so I joined my while and if statements. I also added a few delays throughout the code so the sensor can have some time to think. </p>
                    <img src="get temp readings.png" alt="Python" class="lab-image">
                    <p>This is the Python side with the output:</p>
                    <img src="get temp readings python.png" alt="Python" class="lab-image">
                    <br>

                    <h3>Task 8: Advantages and Disadvantages of Both Methods </h3>
                    <p>The second method (get_temp_readings) contains the most information which is beneficial because you won't need to run more than one code at a time. However, because it has the most information it takes longer than the first method to run. So if what you are looking is for both sets of data simultaneously then this is the right method. If you only care for the timestamps then the other code might interest you more. The second method has a 70 ms delay in the loop under 5 seconds which means that the system can record about 71 (5000 ms/70 ms) datapoints . Approximately the amount of data you can send without running out of memory would be: (384kB)*(1024 bytes/kB) = 393,216 [bytes of memory available]. And then the temperature reading and timestamp are each 4 bytes, so (393,216/8) = 49,152 entries of time and temperature data could be collected without running out of memory. </p>
                    <br>

<!--                     <h3>Task 9:  </h3>
                    
                    <br>

                    
                    <h3>Task 10:  </h3>
                    
                    <br> -->

                    
                    <h3>Discussion:</h3>
                    <p>In each task, I discussed the challenges I encountered as they arose. Overall, I gained a much deeper understanding of Python’s structure and formatting. While I have had equal experience with Arduino and MATLAB, I was less proficient in Python. However, this lab provided an in-depth exploration of various Python concepts, significantly enhancing my proficiency. For Lab 1 I did look over Nila's page from last year, I double checked my functions whenever an error would pop up. However, I only code what I understand, so there are many things different between her code and mine since it can be seen that her level of profficiency in Python is way higher. Other than that, I used the Python Cheatsheet found in the class website for a few built i funcitons.</p>
                    <br>

                <a href="index.html#lab1b">Back to Lab 1B on main page</a> <!-- Link back to the section on the main page -->
            </section>



<!-- --------LAB 2-------- -->
            
            <section id="lab2">
                <div class="lab-text">
                    <h1>Lab 2: IMU</h1>
                    <h3>Objective: <span class="objective-text">Familiarize myself with the IMU and how to integrate it to your robot. Also play around with the robot given, understand how to use it and its limits and faults. </span></h3>
                    <h3>Pre-Lab: <span class="objective-text">Read up on the IMU and its datasheet. Skim through the lab instructions as well, so that when I get to the lab, I can start immediately since it's extensive.</span></h3>
                    <br>
                    
                    <h3>SET UP THE IMU: </h3>
                    <p>I already had the libraries needed in Arduino because we used them in class so I proceeded to connect my IMU to the Artemis board via the QWICC connectors.</p>
                    <img src="artemis_imu.jpg" alt="IMU" class="lab-image">
                    <p>I then ran the example code Example1_Basics from the SparkFun 9DOF IMU Breakout ICM-20948 Arduino Library. This is what it outputted:</p>
                    <iframe width="560" height="315" src="https://www.youtube.com/embed/ddwSwPX0hdY?si=39NRvYvRptkVME6h" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                    <br>
                    <p>AD0_VAL Discussion:   The AD0_VAL represents the value of the last bit in the I2C address. The default on the IMU is 1, but when the ADR jumper is closed, the value becomes 0. This controls the I2C address of the IMU: when AD0_VAL is 1, the address is 0x69, and when AD0_VAL is 0, the address is 0x68. This is useful when using multiple IMUs on the same I2C bus, allowing them to have different addresses and communicate independently. </p>
                    <br>
                    <p>Acc. & Gyr. Discussion:   To observe changes in accelerometer and magnetometer values, I placed the IMU in three different orientations and analyzed the serial monitor output. When positioned right-side up on a horizontal surface, the accelerometer readings were around 20 mg in the X and Y directions, indicating minimal tilt. In the Z direction, the values were around 1000 mg (~1g), meaning gravity was the primary acceleration detected. The gyroscope readings in this position were approximately 0 DPS, aside from minor offsets, which is expected since the IMU was stationary and should not register rotational movement. Here is the IMU in the upright orientation:</p>
                    <img src="example_code.jpg" alt="example code" class="lab-image">
                    <br>

                    <h3>ACCELEROMETER: </h3>
                    <p>For this part, I adapted the code from Example1_Basics, edited the loop funciton and made a new function. At first my values for pitch and roll were printing out like if they were switched, but after talking with the Professor we realized that the lecture notes had a typo and the equations for roll and pitch were switched. We fixed it and got it working accordingly. These are my edits to the previous code:</p>
                    <pre><code>
void loop(){

  if (myICM.dataReady()) { 
                        
    myICM.getAGMT(); 
    getRollandPitch(myICM.accX(),myICM.accY(),myICM.accZ());
    delay(50); }
  else {
    SERIAL_PORT.println("Waiting for data");
    delay(500);}}



void getRollandPitch(float x,float y,float z) {
  float roll = 0;
  float pitch = 0;

  roll = atan2(y,z)*180/M_PI; 
  pitch = atan2(x,z)*180/M_PI; 

  SERIAL_PORT.print("Roll:");
  SERIAL_PORT.print(roll);
  SERIAL_PORT.print(" | Pitch:");
  SERIAL_PORT.println(pitch);}
                    </code></pre>
                    
                    <p>And this is the output at {-90,0,90}:</p>
                    <img src="pitch_roll.jpg" alt="pitch and roll" class="lab-image">
                    <br>
                    <p>Accelerometer accuracy dicussion:  For this part I decided to take bits of a sketch I had from a past project, adapt all the top stuff from the previous example code and then print out the conversion factor of each axis after collecting raw data. This is what the code printed:</p>
                    <pre><code>
Conv. Factor X: 0.41
Conv. Factor Y: 0.00
Conv. Factor Z: -0.00
                    </code></pre>
                    <p>From this data we can see that the y and z axis' values are fairly calibrated already, but the x does have an offset. Note: I did not collect data to calibrate the X-axis in this code. It only collected data from the IMU facing up and facing down (aka the Z-axis).</p>
                    <br>
                    <br>

                    <p>Noise in the frequency spectrum analysis: </p>
                    <table>
                        <tr>
                            <td><img src="raw_rollNoise.png" alt="Raw roll noise" width="300"></td>
                            <td><img src="raw_rollFT.png" alt="Raw roll FT" width="300"></td>
                        </tr>
                    </table>
                    <table>
                        <tr>
                            <td><img src="raw_pitchNoise.png" alt="Raw pitch noise" width="300"></td>
                            <td><img src="raw_pitchFT.png" alt="Raw pitch FT" width="300"></td>
                        </tr>
                    </table>
                    
                    
                <a href="index.html#lab2">Back to Lab 2 on main page</a> 
            </section>
        
            <section id="lab3">
                <h2>Lab 3: ToF</h2>
                <p>Details about Lab 3...</p>
                <a href="index.html#lab3">Back to Lab 3 on main page</a> 
            </section>
        
            <section id="lab4">
                <h2>Lab 4: Motor Drivers and Open Loop Control</h2>
                <p>Details about Lab 4...</p>
                <a href="index.html#lab4">Back to Lab 4 on main page</a> 
            </section>
        
            <section id="lab5">
                <h2>Lab 5: Linear PID and Linear Interpolation</h2>
                <p>Details about Lab 5...</p>
                <a href="index.html#lab5">Back to Lab 5 on main page</a> 
            </section>
        
            <section id="lab6">
                <h2>Lab 6: Orientation PID</h2>
                <p>Details about Lab 6...</p>
                <a href="index.html#lab6">Back to Lab 6 on main page</a> 
            </section>
        
            <section id="lab7">
                <h2>Lab 7: Kalman Filtering</h2>
                <p>Details about Lab 7...</p>
                <a href="index.html#lab7">Back to Lab 7 on main page</a> 
            </section>
        
            <section id="lab8">
                <h2>Lab 8: Stunts!</h2>
                <p>Details about Lab 8...</p>
                <a href="index.html#lab8">Back to Lab 8 on main page</a> 
            </section>
        
            <section id="lab9">
                <h2>Lab 9: Mapping</h2>
                <p>Details about Lab 9...</p>
                <a href="index.html#lab9">Back to Lab 9 on main page</a> 
            </section>
        
            <section id="lab10">
                <h2>Lab 10: Localization (sim)</h2>
                <p>Details about Lab 10...</p>
                <a href="index.html#lab10">Back to Lab 10 on main page</a> 
            </section>
        
            <section id="lab11">
                <h2>Lab 11: Localization (real)</h2>
                <p>Details about Lab 11...</p>
                <a href="index.html#lab11">Back to Lab 11 on main page</a> 
            </section>
        
            <section id="lab12">
                <h2>Lab 12: Planning and Execution</h2>
                <p>Details about Lab 12...</p>
                <a href="index.html#lab12">Back to Lab 12 on main page</a> 
            </section>
        </div>
    </section>

<button id="backToTop">↑ Back to Top</button>
    
    <!-- Footer -->
<!--     <footer>
        <p>&copy; 2025 Aleira Sanchez. All rights reserved.</p>
    </footer> -->
</body>
</html>
